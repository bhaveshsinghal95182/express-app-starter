# Project Templates

Understanding the different project structures and templates generated by Kickstart Express.

## Template Overview

Kickstart Express generates different project structures based on the options you choose. This guide explains each template type and when to use them.

## Basic Templates

### Simple Root Structure

**Generated with:** `--language ts` (no `--src` flag)

```
my-app/
├── index.ts              # Main server file
├── package.json          # Dependencies and scripts
├── tsconfig.json         # TypeScript configuration (TS only)
├── .env                  # Environment variables
├── .gitignore           # Git ignore patterns
└── pnpm-lock.yaml       # Lock file
```

**Best for:**
- Quick prototypes
- Learning projects
- Simple APIs with minimal structure
- Single-file applications

**Key files:**

**`index.ts`:**
```typescript
import express from "express";
import cors from "cors";
import dotenv from "dotenv";

dotenv.config();

const app = express();
const port = process.env.PORT || 3000;

// Middleware
app.use(cors());
app.use(express.json());

// Routes
app.get("/", (req, res) => {
  res.json({ message: "Hello from Express with TypeScript!" });
});

app.listen(port, () => {
  console.log(`Server is running on http://localhost:${port}`);
});
```

### Organized Source Structure

**Generated with:** `--src` flag

```
my-app/
├── src/
│   └── index.ts          # Main server file
├── package.json          # Dependencies and scripts
├── tsconfig.json         # TypeScript configuration (TS only)
├── .env                  # Environment variables
├── .gitignore           # Git ignore patterns
└── pnpm-lock.yaml       # Lock file
```

**Best for:**
- Medium-sized applications
- Projects that will grow over time
- When you want to separate source from config
- Preparing for build processes

**Key differences:**
- Source code isolated in `src/` directory
- Cleaner project root
- Better separation of concerns
- Build output can go to `dist/` or `build/`

## Advanced Templates

### Structured Architecture

**Generated with:** `--structured` flag (automatically enables `--src`)

```
my-app/
├── src/
│   ├── controllers/
│   │   └── calculator.controller.ts    # Request handlers
│   ├── routes/
│   │   └── calculator.route.ts         # Route definitions
│   ├── services/
│   │   └── calculator.service.ts       # Business logic
│   ├── models/
│   │   └── calculation.model.ts        # Data models/types
│   └── index.ts                        # Main server file
├── package.json
├── tsconfig.json
├── .env
├── .gitignore
└── pnpm-lock.yaml
```

**Best for:**
- Enterprise applications
- Team development
- Microservices
- Applications with complex business logic
- Maintainable, scalable codebases

**Architecture explained:**

**Controllers** (`src/controllers/`)
Handle HTTP requests and responses. They validate input, call services, and format responses.

```typescript
// calculator.controller.ts
import { Request, Response } from 'express';
import { CalculatorService } from '../services/calculator.service';

export class CalculatorController {
  private calculatorService = new CalculatorService();

  add = (req: Request, res: Response) => {
    const { a, b } = req.body;
    const result = this.calculatorService.add(a, b);
    res.json({ result });
  };
}
```

**Services** (`src/services/`)
Contain business logic, data processing, and external API calls.

```typescript
// calculator.service.ts
export class CalculatorService {
  add(a: number, b: number): number {
    return a + b;
  }

  subtract(a: number, b: number): number {
    return a - b;
  }
}
```

**Routes** (`src/routes/`)
Define API endpoints and connect them to controller methods.

```typescript
// calculator.route.ts
import { Router } from 'express';
import { CalculatorController } from '../controllers/calculator.controller';

const router = Router();
const calculatorController = new CalculatorController();

router.get('/', (req, res) => {
  res.json({ message: "Calculator API is working!" });
});

router.post('/add', calculatorController.add);

export default router;
```

**Models** (`src/models/`)
Define data structures, interfaces, and type definitions.

```typescript
// calculation.model.ts
export interface Calculation {
  operation: 'add' | 'subtract' | 'multiply' | 'divide';
  operands: number[];
  result: number;
  timestamp: Date;
}

export interface CalculationRequest {
  a: number;
  b: number;
}
```

## Docker Templates

### With Docker Support

**Generated with:** `--docker` flag

Adds the following files to any template:

```
my-app/
├── [existing structure]
├── Dockerfile            # Container definition
├── docker-compose.yml    # Development/production setup
└── .dockerignore        # Docker ignore patterns
```

**`Dockerfile`** (Multi-stage build):
```dockerfile
# Development stage
FROM node:18-alpine AS development
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
EXPOSE 3000
CMD ["npm", "run", "dev"]

# Build stage (for TypeScript)
FROM development AS build
RUN npm run build

# Production stage
FROM node:18-alpine AS production
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production && npm cache clean --force
COPY --from=build /app/dist ./dist
EXPOSE 3000
USER node
CMD ["npm", "start"]
```

**`docker-compose.yml`:**
```yaml
version: '3.8'

services:
  app:
    build:
      context: .
      target: development
    ports:
      - "3000:3000"
    volumes:
      - .:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
    command: npm run dev

  app-prod:
    build:
      context: .
      target: production
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
```

## Language Variations

### TypeScript Templates

**Generated with:** `--language ts` (default)

**Additional files:**
- `tsconfig.json` - TypeScript configuration
- TypeScript dependencies in `package.json`
- `.ts` file extensions

**`tsconfig.json`:**
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "node",
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

**Package.json scripts:**
```json
{
  "scripts": {
    "dev": "tsx watch src/index.ts",
    "build": "tsc",
    "start": "node dist/index.js"
  }
}
```

### JavaScript Templates

**Generated with:** `--language js`

**Characteristics:**
- No TypeScript dependencies
- No `tsconfig.json`
- `.js` file extensions
- Simpler `package.json`

**Package.json scripts:**
```json
{
  "scripts": {
    "dev": "nodemon index.js",
    "start": "node index.js"
  }
}
```

## Configuration Files

### Environment Variables (`.env`)

Generated for all templates:

```bash
# Server Configuration
PORT=3000
NODE_ENV=development

# Add your environment variables here
# DATABASE_URL=mongodb://localhost:27017/myapp
# JWT_SECRET=your-secret-key
# API_KEY=your-api-key
```

### Git Configuration (`.gitignore`)

```gitignore
# Dependencies
node_modules/
pnpm-lock.yaml
npm-debug.log*

# Runtime
.env
.env.local
.env.production

# Build outputs
dist/
build/

# IDE
.vscode/
.idea/

# OS
.DS_Store
Thumbs.db

# Logs
logs/
*.log
```

### Package Management

**Dependency examples by template type:**

**Simple TypeScript:**
```json
{
  "dependencies": {
    "express": "^4.18.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0"
  },
  "devDependencies": {
    "tsx": "^3.12.0",
    "typescript": "^5.0.0",
    "@types/express": "^4.17.0",
    "@types/cors": "^2.8.0"
  }
}
```

**Simple JavaScript:**
```json
{
  "dependencies": {
    "express": "^4.18.0",
    "cors": "^2.8.5",
    "dotenv": "^16.0.0"
  },
  "devDependencies": {
    "nodemon": "^2.0.0"
  }
}
```

## Template Selection Guide

### When to Use Each Template

| Template Type | Use Case | Team Size | Complexity |
|---------------|----------|-----------|------------|
| Simple Root | Prototypes, learning, demos | 1 person | Low |
| Organized Source | Growing projects, build processes | 1-3 people | Medium |
| Structured | Enterprise, microservices, teams | 3+ people | High |
| + Docker | Deployment, containers, DevOps | Any | Medium-High |

### Choosing Options

**For beginners:**
```bash
kickstart-express --name my-first-api --language ts
```

**For growing projects:**
```bash
kickstart-express --name my-project --language ts --src
```

**For production applications:**
```bash
kickstart-express --name my-service --language ts --docker --src --structured
```

**For quick JavaScript prototypes:**
```bash
kickstart-express --name prototype --language js
```

## Extending Templates

### Adding Database Support

**MongoDB (Mongoose):**
```bash
pnpm add mongoose
pnpm add -D @types/mongoose  # TypeScript only
```

**PostgreSQL (pg):**
```bash
pnpm add pg
pnpm add -D @types/pg  # TypeScript only
```

### Adding Authentication

```bash
pnpm add jsonwebtoken bcryptjs
pnpm add -D @types/jsonwebtoken @types/bcryptjs  # TypeScript only
```

### Adding Testing

```bash
pnpm add -D jest @types/jest ts-jest supertest @types/supertest
```

### Adding Validation

```bash
pnpm add joi express-validator zod  # Choose one
```

## Best Practices

### Template Customization

1. **Start Simple:** Begin with basic templates and add complexity as needed
2. **Consistent Structure:** Maintain the same structure across related projects
3. **Environment Separation:** Use different `.env` files for different environments
4. **Docker for Production:** Always use Docker for production deployments
5. **TypeScript for Teams:** Use TypeScript for any project with multiple developers

### Migration Between Templates

**From Simple to Organized:**
```bash
# Move files to src/
mkdir src
mv index.ts src/
# Update package.json scripts and tsconfig.json
```

**From Organized to Structured:**
```bash
# Create architecture folders
mkdir src/controllers src/services src/routes src/models
# Split index.ts into appropriate files
```

The templates are designed to be extensible and can evolve with your project needs. Start with what fits your current requirements and expand as your project grows.